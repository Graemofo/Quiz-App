
<!doctype html>
<html lang="en">
<head>

 <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 <script type="text/javascript">
  function setUp(){
    document.getElementById('question_container').style.visibility = 'hidden';
    document.getElementById('true_false_buttons').style.visibility = 'hidden';
  } 
</script>


<title>Friday Night Sippy Poos Quiz</title>
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/grid/">

<script type="text/javascript">
  var count = 1;

  function createTeamRow(){     
    var newDiv = document.createElement('div');
    newDiv.id = 'newDiv';
    newDiv.classList.add('row');
    var attach = document.getElementById('main_container');
    var team = document.getElementById("team_name_field").value;
    newDiv.innerHTML = '<div class="col-sm-4"><h3>'+team+'</h3></div><div class="col-sm-4"><h3 id="team'+count+'_score">0</h3></div><div class="col-sm-4"><button onclick="addOne('+"'team"+count+"_score'"+')" type="button" class="btn btn-outline-light" id="teamButt">+1</button></div>';
    count++;
    attach.appendChild(newDiv);

    var team = document.getElementById("team_name_field").value;
    document.getElementById("team_form").reset();

  }    
</script>

</head>

<body onload="setUp();">
  <div id="main">

    <div class="container" id="main_container"> 
      <!-- Form to create Teams-->
      <div class="row" id="form">
        <div class="col-sm-4">         
         <form id="team_form">
          <div class="form-group">
            <label>Enter Team Name</label>
            <input class="form-control" id="team_name_field" placeholder="Team Name">
          </div> 
          <button class="btn btn-primary" onclick="createTeamRow();return false">Submit</button>         
        </form>
      </div>
      <div class="col-sm-7"><div class="col-12"><h1>Friday Night Sippy Poos Quiz Night</h1></div> </div>
      <div class="col-sm-1"><button onclick="startGame()"type="button" class="btn btn-outline-light">Start</button></div>
    </div>
  </div> <!-- /container -->


  <div class="container" id="question_container">

    <div class="row">
      <div class="col-sm-10" id="question_div"><h3 id="question"></h3></div>
      <div class="col-sm-2"><button onclick="nextQuestion()" type="button" class="btn btn-outline-light">Next Question</button></div>
    </div>


    <div class="row">
      <div class="col-sm-2 ansbtn"><button onclick="checkAnswer('A')" type="button" class="btn btn-outline-light" id="butt1">A</button></div>
      <div class="col-sm-10" id="answer_text"><h4 id="ans1"></h4></div>
    </div>

    <div class="row">
      <div class="col-sm-2 ansbtn"><button onclick="checkAnswer('B')" type="button" class="btn btn-outline-light" id="butt2">B</button></div>
      <div class="col-sm-10"><h4 id="ans2"></h4></div>
    </div>

    <div class="row">
      <div class="col-sm-2"><button onclick="checkAnswer('C')" type="button" class="btn btn-outline-light" id="butt3">C</button></div>
      <div class="col-sm-10"><h4 id="ans3"></h4></div>
    </div>

    <div class="row">
      <div class="col-sm-2"><button onclick="checkAnswer('D')" type="button" class="btn btn-outline-light" id="butt4">D</button></div>
      <div class="col-sm-10"><h4 id="ans4"></h4></div>
    </div>


    <div class="row" id="true_false_buttons">
      <div class="col-sm-6"><h1 id="ans1"><button type="button" class="btn btn-outline-light" id="butt">True</button></h1></div>
      <div class="col-sm-6"><h1 id="ans2"><button type="button" class="btn btn-outline-light" id="butt">False</button></h1></div>
    </div> 

  </div> <!-- /question_container -->



  <script type="text/javascript">

   function addOne(team){
     var num = parseInt(document.getElementById(team).innerHTML);
     num = num+1;
     document.getElementById(team).innerHTML = num;
   }

   let jsondata;
   function getData(){
     fetch('https://opentdb.com/api.php?amount=50')
     .then((response) => {
      return response.json();          
    })
     .then((data) => {
      console.log(data);
      console.log("Question:  "+data.results[0].question)
      jsondata = data;
      nextQuestion();            
    });
   }

   function shuffleAnswers(arra1){
    var ctr = arra1.length, temp, index;
    while (ctr > 0) {
      index = Math.floor(Math.random() * ctr);
      ctr--;
      temp = arra1[ctr];
      arra1[ctr] = arra1[index];
      arra1[index] = temp;
    }
    console.log(arra1);
    console.log("Correct Answer: "+jsondata.results[question_count].correct_answer)
    return arra1;
  }

  var question_count = 0;
  function nextQuestion(){
    //Reset Button Colors after each question
    var but1 = document.getElementById('butt1');
    var but2 = document.getElementById('butt2');
    var but3 = document.getElementById('butt3');
    var but4 = document.getElementById('butt4');
    but1.style.backgroundColor = "blue"; 
    but2.style.backgroundColor = "blue"; 
    but3.style.backgroundColor = "blue"; 
    but4.style.backgroundColor = "blue"; 

    var q = jsondata.results[question_count].question;
    if(jsondata.results[question_count].type == "multiple"){

      document.getElementById('question_container').style.visibility = 'visible';
      document.getElementById('true_false_buttons').style.visibility = 'hidden';

      document.getElementById('butt1').style.visibility = 'visible';
      document.getElementById('butt2').style.visibility = 'visible';
      document.getElementById('butt3').style.visibility = 'visible';
      document.getElementById('butt4').style.visibility = 'visible';

      document.getElementById('question').innerHTML = q;

      var a = jsondata.results[question_count].correct_answer;
      var b = jsondata.results[question_count].incorrect_answers[0];
      var c = jsondata.results[question_count].incorrect_answers[1];
      var d = jsondata.results[question_count].incorrect_answers[2];

      var ans = [a, b, c, d]

      var shuffled = shuffleAnswers(ans);

      document.getElementById('ans1').innerHTML = shuffled[0]
      document.getElementById('ans2').innerHTML = shuffled[1]
      document.getElementById('ans3').innerHTML = shuffled[2]
      document.getElementById('ans4').innerHTML = shuffled[3]

      
    }else if(jsondata.results[question_count].type == "boolean"){

      document.getElementById('true_false_buttons').style.visibility = 'visible';
      document.getElementById('butt1').style.visibility = 'hidden';
      document.getElementById('butt2').style.visibility = 'hidden';
      document.getElementById('butt3').style.visibility = 'hidden';
      document.getElementById('butt4').style.visibility = 'hidden';
      document.getElementById('ans1').innerHTML = "";
      document.getElementById('ans2').innerHTML = "";
      document.getElementById('ans3').innerHTML = "";
      document.getElementById('ans4').innerHTML = "";

      document.getElementById('question').innerHTML = q;
      
      console.log("Boolean")

    }
  }

  function checkAnswer(ans){
    // alert("Answer is "+ans+" "+question_count);
    var guess;
    var correct = jsondata.results[question_count].correct_answer;
    if(ans == 'A'){
      let = btnA = document.querySelector('#butt1');
       guess = document.getElementById("ans1").innerText;
       if(guess === correct){
        btnA.style.backgroundColor='#7CFC00';       
       
      }else{
        btnA.style.backgroundColor='#FF0000';
       
      }    
    }
    if(ans == 'B'){
       let = btnB = document.querySelector('#butt2');
       guess = document.getElementById("ans2").innerText;
       if(guess === correct){
        btnB.style.backgroundColor='#7CFC00'; 
        
      }else{
        btnB.style.backgroundColor='#FF0000';
        
      }    
    }
    if(ans == 'C'){
      let = btnC = document.querySelector('#butt3');
       guess = document.getElementById("ans3").innerText;
       if(guess === correct){
        btnC.style.backgroundColor='#7CFC00';
        
      }else{
        btnC.style.backgroundColor='#FF0000';
        
      }    
    }
    if(ans == 'D'){
      let = btnD = document.querySelector('#butt3');
       guess = document.getElementById("ans4").innerText;
       if(guess === correct){
        btnD.style.backgroundColor='#7CFC00';
       
        btnD.style.backgroundColor='#FF0000';
      }    
    }
    question_count++;
    setTimeout(nextQuestion, 3000)
   
  }

  function trueOrFalse(){

  }

  function startGame(){
    document.getElementById('question_container').style.visibility = 'visible';
    getData();
  }
</script>

</div>
</body>
</html>












